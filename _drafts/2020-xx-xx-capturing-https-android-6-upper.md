---
layout: post
title: 안드로이드 6 이상에서 HTTPS 패킷 캡쳐하기
description: 안드로이드 6 이상에서 HTTPS 패킷 캡쳐하기
tags: [Network]
---

안드로이드 애플리케이션 분석을 하다보면,
앱이 외부 서버와 통신하는 네트워크 패킷을 분석해야 하는 경우가 종종 있습니다.

개발자라면, API 디버깅이나 테스트를 위한 경우겠고,
저의 경우는 직접 앱 개발을 하지는 않으니 주로 리버스 엔지니어링 과정에서 애플리케이션의 동작을 파악하기 위해서 네트워크 트래픽을 살펴보게 되는 경우가 많습니다.

패킷 캡쳐를 위해서 대표적으로 많이 사용되는 도구는 [WireShark](https://www.wireshark.org/download.html)입니다.

문제는 HTTPS 패킷의 경우는 SSL 방식으로 암호화되어 있기 때문에~

## HTTPS 트래픽 캡쳐링

그렇다면 HTTPS 패킷의 내용물을 보려면 어떻게 해야할까요?

이상적인 방식은 개인키를 ~ 매번 연결할 때마다 ~.

그래서 일반적으로는 가짜 인증서를 사용한 MITM 방식을 사용.

이러한 기능을 지원해주는 대표적인 프로그램은 FIDDLER,

그러나 PC 프로그램이기 때문에 안드로이드에서 사용하기는 어렵다.

~ 패킷 캡쳐 앱이 있습니다.

이 앱을 사용하면 ~.

## Life is Not That Easy

그런데, 안드로이드 6 이상에서 이 앱을 통해서 HTTPS ~ 해보려고하면 어째서인지 되지 않습니다.

왜일까하고 살펴보면, 안드로이드 6 버전 이상부터는 ~ 기본 정책이 사용자 인증서를 신뢰하지 않는 것으로 변경되었습니다.

이 값은 ~ 파일에 지정되어 있음.